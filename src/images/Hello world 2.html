<!DOCTYPE html>
<!-- saved from url=(0034)http://localhost:8000/1_hello.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="keywords" content="HTML5,Golang,MySQL">
    <meta name="description" content=" 事件回顾 整个事件的回顾Gitlab.com在第一时间就放到了Google Doc上，事后，又发了一篇Blog来说明这个事，在这里，我简单的回顾一下这个事件的过程。首先，一个叫YP的同学在给gitlab的线上数据库做一些负载均衡的工作，在做这个工作时的时候突发了一个情况，Gitlab被DDoS攻击，数据库的使用飙高，在block完攻击者的IP后，发现有个staging的数据库(db2.staging)已经落后生产库4GB的数据，于是YP同学在Fix这个staging库的同步问题的时候，发现db2.staging有各种问题都和主库无法同步，在这个时候，YP同学已经工作的很晚了，在尝试过多个方法">
    <meta http-equiv="X-UA-Compatible" content="edge">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Content-Language" content="zh-CN">
    <meta name="author" content="Nicholas Lee">

    <title>Hello world 2</title>
    <link rel="icon" type="image/png" sizes="32x32" href="./Hello world 2_files/logo.png">
    <style type="text/css">
    * {
  margin: 0;
  padding: 0;
  text-decoration: none;
}
a {
  color: #333;
}
a:hover {
  color: #851d1c;
}
table {
  border-spacing: 0;
}
body {
  font: 1.1em/1.5 Helvetica, Microsoft YaHei, Arial, sans-serif;
  color: #333;
}
.app .app-line1 {
  height: 1px;
  width: 100%;
  margin: 1em auto;
  background-color: #ddd;
}
.app .app-line2 {
  height: 2px;
  width: 100%;
  margin: 1em auto;
  background-color: #ddd;
}
.app .ad-link {
  color: #999;
}
.app .app-header {
  width: 100%;
}
.app .app-header .app-nav {
  margin: 0 auto;
  padding: 0 1em;
  width: 1200px;
  padding: 0.5em 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.app .app-header .app-nav .app-logo {
  display: flex;
  align-items: center;
  justify-content: center;
}
.app .app-header .app-nav .app-logo .app-logo-image {
  height: 2em;
}
.app .app-header .app-nav .app-logo .app-logo-title {
  margin-left: 0.5em;
  font-size: 1.3em;
  color: #999;
}
.app .app-header .app-nav .app-nav-menu {
  color: #333;
}
.app .app-header .app-nav .app-nav-menu a {
  margin-left: 1em;
}
.app .app-header .app-nav .app-nav-menu a:hover {
  color: #851d1c;
}
.app .app-header .app-brand {
  width: 100%;
  padding: 1.5em 0 2em 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3em;
  color: #fff;
  background-color: #851d1c;
  box-shadow: 0 0 1px 1px #999;
}
.app .app-body {
  margin: 0 1em;
  width: 1200px;
  margin: 1em auto;
  display: flex;
  justify-content: space-between;
}
.app .app-body .app-container {
  flex: 0.7;
}
.app .app-body .app-container .app-page {
  display: flex;
  flex-wrap: wrap;
}
.app .app-body .app-container .app-page a {
  margin-bottom: 1em;
  background-color: #fafafa;
  padding: 0.3em 0.8em;
  margin-right: 1em;
}
.app .app-body .app-container .app-page a.app-page-active {
  background-color: #851d1c;
  color: #fff;
}
.app .app-body .app-side {
  flex: 0.3;
  margin-left: 1em;
}
.app .app-body .app-side .app-side-item {
  padding: 1em;
  background-color: #fafafa;
  margin-bottom: 1em;
}
.app .app-body .app-side .app-side-item .app-side-title {
  font-size: 1.2em;
  margin-bottom: 0.5em;
  color: #851d1c;
}
.app .app-body .app-side .app-side-item .app-side-title:before {
  content: &quot;■ &quot;;
}
.app .app-body .app-side .app-side-item .app-side-list li {
  list-style: circle;
  margin-bottom: 0.3em;
}
.app-article-list .app-article {
  padding: 1em;
  background-color: #fafafa;
  margin-bottom: 1em;
}
.app-article-list .app-article-list-tools .app-article-link {
  text-align: center;
  text-decoration: underline;
}
.app-article .app-article-header .app-article-property {
  display: flex;
}
.app-article .app-article-header .app-article-property .app-article-tag {
  margin-right: 0.5em;
}
.app-article .app-article-header .app-article-property .app-article-tag span {
  font-size: 0.8em;
  margin-right: 0.5em;
  color: #fff;
  padding: 0.5em 0.5em 0.3em 0.5em;
}
.app-article .app-article-header .app-article-property .app-article-date {
  margin-right: 1em;
  color: #999;
}
.app-article .app-article-header .app-article-title {
  margin-top: 0.5em;
  font-size: 2em;
}
.app-article .app-article-header .app-article-title a {
  color: #851d1c;
}
.app-article .app-article-content {
  padding-bottom: 2em;
}
.app-article .app-article-content img {
  float: right;
  max-width: 50%;
  margin-left: 1em;
  margin-bottom: 1em;
}
.app-article .app-article-content img[alt&#x3D;full] {
  margin-left: 0;
  float: none;
  max-width: 100%;
}
.app-article .app-article-content a {
  text-decoration: underline;
  cursor: pointer;
}
.app-article .app-article-content ul {
  margin-left: 1.5em;
}
.app-article .app-article-content table {
  width: 100%;
  margin: 1em 0;
  border-right: 1px solid #ddd;
}
.app-article .app-article-content table thead {
  background-color: #ddd;
}
.app-article .app-article-content table thead tr th {
  font-weight: normal;
  text-align: center;
  padding: 0.5em 0.3em;
}
.app-article .app-article-content table tbody tr td {
  padding: 0.5em 0.3em;
  border-left: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
}
.app-article .app-article-content h2 {
  font-weight: normal;
  padding-left: 0.5em;
  margin-top: 1em;
  border-left: 0.1em solid #851d1c;
}
.app-article .app-article-content p {
  line-height: 1.8em;
  margin: 1em auto;
}
.app-article .app-article-notice {
  padding: 1em;
  background-color: #fafafa;
  border-left: 0.1em solid #851d1c;
}
.app-article .app-article-notice a {
  color: #851d1c;
}
.app-article .app-random {
  display: flex;
}
.app-article .app-random .app-random-item {
  padding: 1em 0;
  flex: 0.5;
}
.app-article .app-random .app-random-item:last-child {
  text-align: right;
}
.app-article .app-share {
  margin: 2em 0;
  overflow: auto;
}
.app-article-intro .app-article-content table {
  border-right: 1px solid #e8e3e3;
}
.app-article-intro .app-article-content table thead {
  background-color: #e8e3e3;
}
.app-article-intro .app-article-content table tbody tr td {
  border-left: 1px solid #e8e3e3;
  border-bottom: 1px solid #e8e3e3;
}
@media (max-width: 1200px) {
  .app {
    padding: 0 1em;
  }
  .app .app-header .app-nav {
    width: 100%;
  }
  .app .app-body {
    width: 100%;
  }
}
@media (max-width: 400px) {
  .app .app-header .app-nav .app-nav-menu {
    display: none;
  }
}
@media (max-width: 600px) {
  .app .app-header .app-brand {
    display: none;
  }
  .app-article .app-article-header .app-article-property {
    flex-direction: column;
  }
  .app-article .app-article-header .app-article-property .app-article-date {
    padding: 0.5em 0;
  }
}
@media (max-width: 800px) {
  .app .app-body .app-container {
    flex: 1;
  }
  .app .app-body .app-side {
    display: none;
  }
}
@media (max-width: 1000px) {
  .app .ad-link {
    display: none;
  }
}

.hljs-comment,.hljs-quote{color:#969896}.hljs-variable,.hljs-template-variable,.hljs-tag,.hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-regexp,.hljs-deletion{color:#d54e53}.hljs-number,.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-type,.hljs-params,.hljs-meta,.hljs-link{color:#e78c45}.hljs-attribute{color:#e7c547}.hljs-string,.hljs-symbol,.hljs-bullet,.hljs-addition{color:#b9ca4a}.hljs-title,.hljs-section{color:#7aa6da}.hljs-keyword,.hljs-selector-tag{color:#c397d8}.hljs{display:block;overflow-x:auto;background:black;color:#eaeaea;padding:0.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}
    </style>
  <script src="./Hello world 2_files/embed.js" data-timestamp="1518088777038"></script><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.2d848eddee1b8c12749b72a04b2b33dc.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.845ead53749f15d0bd8a5ee344c8f06e.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.7b984c87b2825d6651408c24c7a8a583.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"><script src="./Hello world 2_files/alfalfa.4a5fcca1fe50a757044dfd331b660625.js" async="" charset="UTF-8"></script></head>
  <body><link href="./Hello world 2_files/jiathis_counter.css" rel="stylesheet" type="text/css"><link href="./Hello world 2_files/jiathis_share.css" rel="stylesheet" type="text/css"><iframe frameborder="0" style="position: absolute; display: none; opacity: 0;" src="./Hello world 2_files/saved_resource.html"></iframe><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;"></div><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; overflow: auto;"></div><iframe frameborder="0" src="./Hello world 2_files/jiathis_utility.html" style="display: none;"></iframe><script id="__bs_script__">//<![CDATA[
    document.write("<script async src='/browser-sync/browser-sync-client.js?v=2.18.13'><\/script>".replace("HOST", location.hostname));
//]]></script><script async="" src="./Hello world 2_files/browser-sync-client.js"></script>

    <div class="app">
      <div class="app-header">
        <div class="app-nav">
          <a class="app-logo" href="http://localhost:8000/">
            <img class="app-logo-image" src="./Hello world 2_files/logo.png">
            <span class="app-logo-title">琼台博客</span>      
          </a>

          <div class="app-nav-menu">
            <a class="ad-link" target="_blank" href="https://www.vultr.com/?ref=7073914">A high performance and more than 15 locations VPS just only $2.5/Month</a>
            <a href="http://localhost:8000/about_blog.html">About blog</a>
          </div>
        </div>

        <div class="app-brand">
          Be a crazy programer
        </div>
      </div>

      <div class="app-body">

        <div class="app-container app-article">
          <div class="app-article-header">
            <div class="app-article-property">
              <div class="app-article-date">2017-07-03</div>
              <div class="app-article-tag"><a href="http://localhost:8000/tag_html5_1.html"><span style="background-color:rgb(103, 72, 75)">HTML5</span></a>
<a href="http://localhost:8000/tag_golang_1.html"><span style="background-color:rgb(71, 62, 121)">Golang</span></a>
<a href="http://localhost:8000/tag_mysql_1.html"><span style="background-color:rgb(51, 4, 178)">MySQL</span></a>
</div>
            </div>
            <div class="app-article-title">Hello world 2</div>
          </div>

          <div class="app-line2"></div>

          <div class="app-article-content">
            <h2>事件回顾</h2>
<p><img src="./Hello world 2_files/a.jpg" alt="alt text" title="Logo Title Text 1"> 整个事件的回顾<a class="vglnk" href="http://gitlab.com/" rel="nofollow"><span>Gitlab</span><span>.</span><span>com</span></a>在第一时间就放到了Google Doc上，事后，又发了一篇Blog来说明这个事，在这里，我简单的回顾一下这个事件的过程。</p>
<pre class="hljs"><code class="js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">let</span> srcPath = <span class="hljs-string">'./src'</span>


<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">TITLE</span>: <span class="hljs-string">'QTTC'</span>,
  <span class="hljs-attr">ARTICLES_PER_PAGE</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">DIST_PATH</span>: <span class="hljs-string">'./dist'</span>,
  <span class="hljs-attr">SCR_PATH</span>: <span class="hljs-string">'./src'</span>,

  <span class="hljs-attr">ARCHIVES_EXTENSION_NAME</span>: <span class="hljs-string">'md'</span>,
  <span class="hljs-attr">ARCHIVES_NO_SEPARATOR</span>: <span class="hljs-string">'_'</span>,
  <span class="hljs-attr">ARCHIVES_PATH</span>: path.join(srcPath, <span class="hljs-string">'archives'</span>),
  <span class="hljs-attr">TEMPLATES_PATH</span>: path.join(srcPath, <span class="hljs-string">'templates'</span>),  <span class="hljs-comment">// This is a common setting for Template</span>
  TPL_LIST: <span class="hljs-string">'list.html'</span>
}
</code></pre>
<table>
<thead>
<tr>
<th>Tables</th>
<th>Are</th>
<th>Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td>right-aligned</td>
<td>$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td>centered</td>
<td>$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td>are neat</td>
<td>$1</td>
</tr>
</tbody>
</table>
<p>首先，一个叫YP的同学在给gitlab的线上数据库做一些负载均衡的工作，在做这个工作时的时候突发了一个情况，Gitlab被DDoS攻击，数据库的使用飙高，在block完攻击者的IP后，发现有个staging的数据库(db2.staging)已经落后生产库4GB的数据��于是YP同学在Fix这个staging库的同步问题的时候，发现db2.staging有各种问题都和主库无法同步，在这个时候，YP同学已经工作的很晚了，在尝试过多个方法后，发现db2.staging都hang在那里，无法同步，于是他想把db2.staging的数据库删除了，这样全新启动一个新的复制，结果呢，删除数据库的命令错误的敲在了生产环境上（db1.cluster），结果导致整个生产数据库被误删除。（陈皓注：这个失败基本上就是 “工作时间过长” + “在多数终端窗口中切换中迷失掉了”）</p>
<h2>再来看看</h2>
<p>整个事件的回顾<a class="vglnk" href="http://gitlab.com/" rel="nofollow"><span>Gitlab</span><span>.</span><span>com</span></a>在第一时间就放到了Google Doc上，事后，又发了一篇Blog来说明这个事，在这里，我简单的回顾一下这个事件的过程。</p>
<p>首先，一个叫YP的同学在给gitlab的线上数据库做一些负载均衡的工作，在做这个工作时的时候突发了一个情况，Gitlab被DDoS攻击，数据库的使用飙高，在block完攻击者的IP后，发现有个staging的数据库(db2.staging)已经落后生产库4GB的数据，于是YP同学在Fix这个staging库的同步问题的时候，发现db2.staging有各种问题都和主库无法同步，在这个时候，YP同学已经工作的很晚了，在尝试过多个方法后，发现db2.staging都hang在那里，无法同步，于是他想把db2.staging的数据库删除了，这样全新启动一个新的复制，结果呢，删除数据库的命令错误的敲在了生产环境上（db1.cluster），结果导致整个生产数据库被误删除。（陈皓注：这个失败基本上就是 “工作时间过长” + “在多数终端窗口中切换中迷失掉了”）</p>
<p>This is my personal blog, I would write something in here for my technique experience articles.
If you like this blog, I'm happy to writing more something for you.</p>

          </div>

          <div class="app-line1"></div>

          <div class="app-share">
            <!-- JiaThis Button BEGIN -->
            <div class="jiathis_style_32x32">
              <a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
              <a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
              <a class="jiathis_button_tqq" title="分享到腾讯微博"><span class="jiathis_txt jtico jtico_tqq"></span></a>
              <a class="jiathis_button_renren" title="分享到人人网"><span class="jiathis_txt jtico jtico_renren"></span></a>
              <a class="jiathis_button_kaixin001" title="分享到开心网"><span class="jiathis_txt jtico jtico_kaixin001"></span></a>
              <a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
              <a class="jiathis_button_douban" title="分享到豆瓣"><span class="jiathis_txt jtico jtico_douban"></span></a>
              <a class="jiathis_button_hi" title="分享到百度空间"><span class="jiathis_txt jtico jtico_hi"></span></a>
              <a class="jiathis_button_ydnote" title="分享到有道云笔记"><span class="jiathis_txt jtico jtico_ydnote"></span></a>
              <a href="http://www.jiathis.com/share?uid=2157402" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
              <a class="jiathis_counter_style"><span class="jiathis_button_expanded jiathis_counter jiathis_bubble_style" id="jiathis_counter_17" title="累计分享0次">0</span></a>
            </div>
            <!-- JiaThis Button END -->
          </div>

          <div class="app-article-notice">
            <p>Article title: <a href="http://localhost:8000/1_hello.html">Hello world 2</a></p>
            <p>Article link: <a href="http://localhost:8000/1_hello.html">http://www.qttc.net/1_hello.html</a></p>
            <p>Article forward: 转载本站文章请注明作者和出处</p>
          </div>

          <div class="app-random">
            <div class="app-random-item">
  <a href="http://localhost:8000/4_hello.html">Hello world 2</a>
</div>
<div class="app-random-item">
  <a href="http://localhost:8000/2_hello.html">Hello world 2</a>
</div>

          </div>

          <div class="app-line1"></div>
          
          <div>
            <div id="disqus_thread"><iframe id="dsq-app6222" name="dsq-app6222" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Hello world 2_files/saved_resource(2).html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 444px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 828px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 828px !important; max-width: 828px !important; position: fixed !important; z-index: 2147483646 !important; height: 22px !important; min-height: 22px !important; max-height: 22px !important; display: none !important;" src="./Hello world 2_files/saved_resource(3).html"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 828px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 828px !important; max-width: 828px !important; position: fixed !important; z-index: 2147483646 !important; height: 22px !important; min-height: 22px !important; max-height: 22px !important; display: none !important;" src="./Hello world 2_files/saved_resource(4).html"></iframe></div>
          </div>

        </div>
        
        <div class="app-side">
          <div class="app-side-item">
            <div class="app-side-title">Recommand</div>
            <div class="app-side-list">
              <li><a href="http://localhost:8000/3_hello.html">Hello world 2</a></li>
<li><a href="http://localhost:8000/4_hello.html">Hello world 2</a></li>

            </div>
          </div>

          <div class="app-side-item">
            <div class="app-side-title">Archive</div>
            <div class="app-side-list">
              <li><a href="http://localhost:8000/archive_aug_2017_1.html">Aug, 2017 (1)</a></li>
<li><a href="http://localhost:8000/archive_jul_2017_1.html">Jul, 2017 (3)</a></li>

            </div>
          </div>

          <div class="app-side-item">
            <div class="app-side-title">Tag</div>
            <div class="app-side-list">
              <li><a href="http://localhost:8000/tag_html5_1.html">HTML5 (4)</a></li>
<li><a href="http://localhost:8000/tag_mysql_1.html">MySQL (4)</a></li>
<li><a href="http://localhost:8000/tag_golang_1.html">Golang (3)</a></li>
<li><a href="http://localhost:8000/tag_javascript_1.html">JavaScript (1)</a></li>

            </div>
          </div>

        </div>
      </div>
    </div>

    <script>
      /**
      *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
      *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
      /*
      var disqus_config = function () {
      this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      */
      (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://qttc.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
      </script>

      <script type="text/javascript">
        var jiathis_config={
          data_track_clickback:true,
          summary:"",
          shortUrl:false,
          hideMore:false
        }
      </script>

      <script type="text/javascript" src="./Hello world 2_files/jia.js" charset="utf-8"></script><script type="text/javascript" src="./Hello world 2_files/plugin.client.js" charset="utf-8"></script>      
  
<iframe style="display: none;" src="./Hello world 2_files/saved_resource(5).html"></iframe></body></html>